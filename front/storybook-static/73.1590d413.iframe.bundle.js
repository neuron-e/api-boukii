"use strict";(self.webpackChunkboukii_admin_v5=self.webpackChunkboukii_admin_v5||[]).push([[73],{"./src/app/core/models/error.models.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var ErrorSeverity;__webpack_require__.d(__webpack_exports__,{M:()=>ErrorSeverity}),function(ErrorSeverity){ErrorSeverity.LOW="low",ErrorSeverity.MEDIUM="medium",ErrorSeverity.HIGH="high",ErrorSeverity.CRITICAL="critical"}(ErrorSeverity||(ErrorSeverity={}))},"./src/app/core/services/logging.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>LoggingService});var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),http=__webpack_require__("./node_modules/@angular/common/fesm2022/http.mjs"),firstValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");let ApiService=class ApiService{constructor(){this.http=(0,core.inject)(http.Qq),this.baseUrl="/api"}get(url,params){var _this=this;return(0,asyncToGenerator.A)(function*(){const httpParams=params?new http.Nl({fromObject:params}):void 0;return(0,firstValueFrom._)(_this.http.get(`${_this.baseUrl}${url}`,{params:httpParams}))})()}post(url,body){var _this2=this;return(0,asyncToGenerator.A)(function*(){return(0,firstValueFrom._)(_this2.http.post(`${_this2.baseUrl}${url}`,body))})()}put(url,body){var _this3=this;return(0,asyncToGenerator.A)(function*(){return(0,firstValueFrom._)(_this3.http.put(`${_this3.baseUrl}${url}`,body))})()}patch(url,body){var _this4=this;return(0,asyncToGenerator.A)(function*(){return(0,firstValueFrom._)(_this4.http.patch(`${_this4.baseUrl}${url}`,body))})()}delete(url){var _this5=this;return(0,asyncToGenerator.A)(function*(){return(0,firstValueFrom._)(_this5.http.delete(`${_this5.baseUrl}${url}`))})()}uploadFile(url,file,additionalData){var _this6=this;return(0,asyncToGenerator.A)(function*(){const formData=new FormData;return formData.append("file",file),additionalData&&Object.keys(additionalData).forEach(key=>{formData.append(key,additionalData[key])}),(0,firstValueFrom._)(_this6.http.post(`${_this6.baseUrl}${url}`,formData))})()}downloadFile(url,filename){var _this7=this;return(0,asyncToGenerator.A)(function*(){const response=yield(0,firstValueFrom._)(_this7.http.get(`${_this7.baseUrl}${url}`,{responseType:"blob",observe:"response"})),blob=response.body;if(!blob)return;const downloadUrl=window.URL.createObjectURL(blob),link=document.createElement("a");link.href=downloadUrl,link.download=filename??_this7.extractFilename(response)??"download",document.body.appendChild(link),link.click(),document.body.removeChild(link),window.URL.revokeObjectURL(downloadUrl)})()}extractFilename(response){const contentDisposition=response.headers.get("content-disposition");if(!contentDisposition)return null;const matches=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(contentDisposition);return matches?.[1]?.replace(/['"]/g,"")??null}};ApiService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],ApiService);let AuthStore=class AuthStore{constructor(){this.api=(0,core.inject)(ApiService),this._user=(0,core.signal)(null),this._token=(0,core.signal)(function getStoredToken(){return"undefined"==typeof localStorage?null:localStorage.getItem("auth_token")}()),this._loading=(0,core.signal)(!1),this._error=(0,core.signal)(null),this._isInitialized=(0,core.signal)(!1),this.user=this._user.asReadonly(),this.token=this._token.asReadonly(),this.loading=this._loading.asReadonly(),this.error=this._error.asReadonly(),this.isInitialized=this._isInitialized.asReadonly(),this.isAuthenticated=(0,core.computed)(()=>!!this._token()&&!!this._user()),this.isLoading=(0,core.computed)(()=>this._loading()),this.hasError=(0,core.computed)(()=>!!this._error()),this.initials=(0,core.computed)(()=>{const user=this._user();return user?.name?user.name.split(" ").map(part=>part[0]).join("").toUpperCase().slice(0,2):""}),this.userRoles=(0,core.computed)(()=>this._user()?.roles||[]),this.hasRole=(0,core.computed)(()=>role=>(this._user()?.roles||[]).includes(role))}signIn(credentials){var _this=this;return(0,asyncToGenerator.A)(function*(){_this._loading.set(!0),_this._error.set(null);try{const response=yield _this.api.post("/auth/login",credentials);if(!(response.success&&response.token&&response.user))throw new Error("Invalid response format");"undefined"!=typeof localStorage&&localStorage.setItem("auth_token",response.token),_this._token.set(response.token),_this._user.set(response.user),_this._loading.set(!1),_this._error.set(null),_this._isInitialized.set(!0)}catch(error){let errorMessage="Login failed";if(error&&"object"==typeof error&&"status"in error){const httpError=error;401===httpError.status?errorMessage="Invalid credentials":429===httpError.status?errorMessage="Too many login attempts. Please try again later.":httpError.detail&&(errorMessage=httpError.detail)}else error instanceof Error&&(errorMessage=error.message);throw _this._loading.set(!1),_this._error.set(errorMessage),_this._token.set(null),_this._user.set(null),error}})()}loadMe(){var _this2=this;return(0,asyncToGenerator.A)(function*(){if(_this2._token()){_this2._loading.set(!0),_this2._error.set(null);try{const user=yield _this2.api.get("/auth/me");_this2._user.set(user),_this2._loading.set(!1),_this2._error.set(null),_this2._isInitialized.set(!0)}catch{"undefined"!=typeof localStorage&&localStorage.removeItem("auth_token"),_this2._user.set(null),_this2._token.set(null),_this2._loading.set(!1),_this2._error.set(null),_this2._isInitialized.set(!0)}}else _this2._isInitialized.set(!0)})()}signOut(){var _this3=this;return(0,asyncToGenerator.A)(function*(){try{yield _this3.api.post("/auth/logout",{}).catch(()=>{})}finally{"undefined"!=typeof localStorage&&localStorage.removeItem("auth_token"),_this3._user.set(null),_this3._token.set(null),_this3._loading.set(!1),_this3._error.set(null)}})()}updateProfile(updates){var _this4=this;return(0,asyncToGenerator.A)(function*(){if(_this4._user()){_this4._loading.set(!0),_this4._error.set(null);try{const updatedUser=yield _this4.api.put("/auth/profile",updates);_this4._user.set(updatedUser),_this4._loading.set(!1),_this4._error.set(null)}catch(error){let errorMessage="Failed to update profile";if(error&&"object"==typeof error&&"detail"in error){const httpError=error;httpError.detail&&(errorMessage=httpError.detail)}else error instanceof Error&&(errorMessage=error.message);throw _this4._loading.set(!1),_this4._error.set(errorMessage),error}}})()}clearError(){this._error.set(null)}hasPermission(permission){const user=this._user();if(!user)return!1;const roles=user.roles||[];return!!roles.includes("admin")||(!!roles.includes("super_admin")||roles.includes(permission))}refreshToken(){var _this5=this;return(0,asyncToGenerator.A)(function*(){if(_this5._token())try{const response=yield _this5.api.post("/auth/refresh",{});response.token&&("undefined"!=typeof localStorage&&localStorage.setItem("auth_token",response.token),_this5._token.set(response.token))}catch{_this5.signOut()}})()}};AuthStore=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],AuthStore);var error_models=__webpack_require__("./src/app/core/models/error.models.ts");let LoggingService=class LoggingService{constructor(){this.auth=(0,core.inject)(AuthStore),this.logBuffer=[],this.maxBufferSize=100,this.currentLogLevel="info"}logError(message,error,context,userFriendlyMessage){const logEntry={id:this.generateId(),timestamp:new Date,level:"error",message,context:this.buildErrorContext(context),error,handled:!0,userFriendlyMessage};this.addToBuffer(logEntry),this.writeToConsole(logEntry),this.isProduction()&&this.shouldSendToServer(logEntry)&&this.sendToLoggingService(logEntry)}logWarning(message,context){const logEntry={id:this.generateId(),timestamp:new Date,level:"warn",message,context:this.buildErrorContext(context||{}),error:{type:"warning",title:"Warning",detail:message,code:"WARNING"},handled:!0};this.addToBuffer(logEntry),console.warn(`[${logEntry.timestamp.toISOString()}] ${message}`,logEntry.context)}logInfo(message,context){const logEntry={id:this.generateId(),timestamp:new Date,level:"info",message,context:this.buildErrorContext(context||{}),error:{type:"info",title:"Info",detail:message,code:"INFO"},handled:!0};this.addToBuffer(logEntry),console.info(`[${logEntry.timestamp.toISOString()}] ${message}`,logEntry.context)}getRecentLogs(count=50){return this.logBuffer.slice(-count)}clearLogs(){this.logBuffer.length=0}exportLogs(){return JSON.stringify(this.logBuffer,null,2)}buildErrorContext(partialContext){const currentUser=this.auth.user();return{url:partialContext.url||window.location.href,method:partialContext.method||"UNKNOWN",userId:currentUser?.id,sessionId:this.getSessionId(),userAgent:navigator.userAgent,timestamp:new Date,requestId:partialContext.requestId||this.generateId(),severity:partialContext.severity||error_models.M.MEDIUM}}addToBuffer(logEntry){this.logBuffer.push(logEntry),this.logBuffer.length>this.maxBufferSize&&this.logBuffer.shift()}writeToConsole(logEntry){const prefix=`[${logEntry.timestamp.toISOString()}] [${logEntry.level.toUpperCase()}]`;switch(logEntry.level){case"error":console.error(`${prefix} ${logEntry.message}`,{error:logEntry.error,context:logEntry.context,userMessage:logEntry.userFriendlyMessage});break;case"warn":console.warn(`${prefix} ${logEntry.message}`,logEntry.context);break;case"info":console.info(`${prefix} ${logEntry.message}`,logEntry.context)}}shouldSendToServer(logEntry){return"error"===logEntry.level||"warn"===logEntry.level&&logEntry.context.severity===error_models.M.HIGH}sendToLoggingService(logEntry){return(0,asyncToGenerator.A)(function*(){try{yield fetch("/api/logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(logEntry)})}catch(error){console.error("Failed to send log to server:",error)}})()}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getSessionId(){let sessionId=sessionStorage.getItem("session_id");return sessionId||(sessionId=this.generateId(),sessionStorage.setItem("session_id",sessionId)),sessionId}isProduction(){return!["development","local"].includes(window.location.hostname)}setLogLevel(level){this.currentLogLevel=level,console.log(`Log level set to: ${level}`)}getLogLevel(){return this.currentLogLevel}shouldLog(level){const levels={debug:0,info:1,warn:2,error:3,none:4},currentLevelNumber=levels[this.currentLogLevel];return levels[level]>=currentLevelNumber}};LoggingService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],LoggingService)},"./src/app/core/services/translation.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>TranslationService});var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),http=__webpack_require__("./node_modules/@angular/common/fesm2022/http.mjs"),firstValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js"),error_models=__webpack_require__("./src/app/core/models/error.models.ts");const LANGUAGE_CONFIGS={en:{code:"en",name:"English",nativeName:"English",flag:"🇺🇸",direction:"ltr",dateFormat:"MM/dd/yyyy",timeFormat:"h:mm a",currencyCode:"USD",currencySymbol:"$",thousandsSeparator:",",decimalSeparator:"."},es:{code:"es",name:"Spanish",nativeName:"Español",flag:"🇪🇸",direction:"ltr",dateFormat:"dd/MM/yyyy",timeFormat:"HH:mm",currencyCode:"EUR",currencySymbol:"€",thousandsSeparator:".",decimalSeparator:","}};function getLanguageConfig(code){return LANGUAGE_CONFIGS[code]||LANGUAGE_CONFIGS.en}function isLanguageSupported(code){return Object.keys(LANGUAGE_CONFIGS).includes(code)}var logging_service=__webpack_require__("./src/app/core/services/logging.service.ts");let TranslationService=class TranslationService{constructor(){this.http=(0,core.inject)(http.Qq),this.logger=(0,core.inject)(logging_service.J),this._currentLanguage=(0,core.signal)("en"),this._translations=(0,core.signal)({en:null,es:null}),this._loadingState=(0,core.signal)({loading:!1,loaded:!1,error:null,lastUpdated:null}),this.currentLanguage=this._currentLanguage.asReadonly(),this.translations=this._translations.asReadonly(),this.loadingState=this._loadingState.asReadonly(),this.currentLanguageConfig=(0,core.computed)(()=>getLanguageConfig(this._currentLanguage())),this.isRTL=(0,core.computed)(()=>"rtl"===this.currentLanguageConfig().direction),this.availableLanguages=(0,core.computed)(()=>Object.values(LANGUAGE_CONFIGS)),this.currentTranslations=(0,core.computed)(()=>this._translations()[this._currentLanguage()]),this.isLoading=(0,core.computed)(()=>this._loadingState().loading),this.hasError=(0,core.computed)(()=>!!this._loadingState().error),this.translationCache=new Map,this.initializeLanguage()}initializeLanguage(){var _this=this;return(0,asyncToGenerator.A)(function*(){const detectedLanguage=_this.detectLanguage();yield _this.setLanguage(detectedLanguage.language),_this.logger.logInfo("Translation service initialized",{url:"translation-service",method:"initializeLanguage",severity:error_models.M.LOW,language:detectedLanguage.language})})()}detectLanguage(){const storedLanguage=this.getStoredLanguage();if(storedLanguage)return{language:storedLanguage,confidence:1,source:"stored"};return{language:function detectBrowserLanguage(){if("undefined"==typeof navigator)return"en";const browserLang=navigator.language,browserLangCode=browserLang.split("-")[0];if(isLanguageSupported(browserLang))return browserLang;if(isLanguageSupported(browserLangCode))return browserLangCode;for(const lang of navigator.languages){const langCode=lang.split("-")[0];if(isLanguageSupported(langCode))return langCode}return"en"}(),confidence:.8,source:"browser"}}setLanguage(language){var _this2=this;return(0,asyncToGenerator.A)(function*(){if(language!==_this2._currentLanguage()){_this2._loadingState.set({loading:!0,loaded:!1,error:null,lastUpdated:null});try{yield _this2.loadTranslations(language),_this2._currentLanguage.set(language),_this2.storeLanguage(language),_this2._loadingState.set({loading:!1,loaded:!0,error:null,lastUpdated:new Date}),_this2.translationCache.clear(),_this2.updateDocumentLanguage(language),_this2.logger.logInfo("Language changed successfully",{url:"translation-service",method:"setLanguage",severity:error_models.M.LOW,language})}catch(error){throw _this2._loadingState.set({loading:!1,loaded:!1,error:error instanceof Error?error.message:"Failed to load translations",lastUpdated:null}),_this2.logger.logError("Failed to set language",{type:"translation_error",title:"Translation Load Error",detail:error instanceof Error?error.message:"Unknown error",code:"TRANSLATION_LOAD_ERROR"},{language}),error}}})()}loadTranslations(language){var _this3=this;return(0,asyncToGenerator.A)(function*(){const currentTranslations=_this3._translations();if(!currentTranslations[language])try{const translations=yield _this3.fetchTranslations(language);_this3._translations.set({...currentTranslations,[language]:translations})}catch(error){if("en"===language)throw error;_this3.logger.logWarning(`Failed to load ${language} translations, trying fallback`),yield _this3.loadTranslations("en")}})()}fetchTranslations(language){var _this4=this;return(0,asyncToGenerator.A)(function*(){try{return yield(0,firstValueFrom._)(_this4.http.get(`/assets/i18n/${language}.json`))}catch(error){return _this4.logger.logWarning(`Could not load translation file for ${language}, using embedded`),_this4.getEmbeddedTranslations(language)}})()}getEmbeddedTranslations(language){return{nav:{dashboard:"Dashboard",clients:"es"===language?"Clientes":"Clients",courses:"es"===language?"Cursos":"Courses",bookings:"es"===language?"Reservas":"Bookings",monitors:"es"===language?"Monitores":"Monitors",settings:"es"===language?"Configuración":"Settings",logout:"es"===language?"Cerrar sesión":"Logout",mainNavigation:"es"===language?"Navegación principal":"Main navigation"},actions:{save:"es"===language?"Guardar":"Save",cancel:"es"===language?"Cancelar":"Cancel",delete:"es"===language?"Eliminar":"Delete",edit:"es"===language?"Editar":"Edit",create:"es"===language?"Crear":"Create",update:"es"===language?"Actualizar":"Update",search:"es"===language?"Buscar":"Search",filter:"es"===language?"Filtrar":"Filter",export:"es"===language?"Exportar":"Export",import:"es"===language?"Importar":"Import",refresh:"es"===language?"Actualizar":"Refresh",back:"es"===language?"Atrás":"Back",next:"es"===language?"Siguiente":"Next",previous:"es"===language?"Anterior":"Previous",submit:"es"===language?"Enviar":"Submit",reset:"es"===language?"Restablecer":"Reset",confirm:"es"===language?"Confirmar":"Confirm",close:"es"===language?"Cerrar":"Close"},form:{name:"es"===language?"Nombre":"Name",email:"Email",password:"es"===language?"Contraseña":"Password",confirmPassword:"es"===language?"Confirmar contraseña":"Confirm Password",phone:"es"===language?"Teléfono":"Phone",address:"es"===language?"Dirección":"Address",city:"es"===language?"Ciudad":"City",country:"es"===language?"País":"Country",zipCode:"es"===language?"Código postal":"Zip Code",birthDate:"es"===language?"Fecha de nacimiento":"Birth Date",gender:"es"===language?"Género":"Gender",description:"es"===language?"Descripción":"Description",notes:"es"===language?"Notas":"Notes",status:"es"===language?"Estado":"Status",type:"es"===language?"Tipo":"Type",category:"es"===language?"Categoría":"Category",price:"es"===language?"Precio":"Price",duration:"es"===language?"Duración":"Duration",capacity:"es"===language?"Capacidad":"Capacity",startDate:"es"===language?"Fecha de inicio":"Start Date",endDate:"es"===language?"Fecha de fin":"End Date",time:"es"===language?"Hora":"Time"},validation:{required:"es"===language?"Este campo es obligatorio":"This field is required",email:"es"===language?"Email no válido":"Invalid email",minLength:"es"===language?"Mínimo {{min}} caracteres":"Minimum {{min}} characters",maxLength:"es"===language?"Máximo {{max}} caracteres":"Maximum {{max}} characters",min:"es"===language?"Valor mínimo: {{min}}":"Minimum value: {{min}}",max:"es"===language?"Valor máximo: {{max}}":"Maximum value: {{max}}",pattern:"es"===language?"Formato no válido":"Invalid format",passwordMismatch:"es"===language?"Las contraseñas no coinciden":"Passwords do not match",phoneInvalid:"es"===language?"Teléfono no válido":"Invalid phone number",dateInvalid:"es"===language?"Fecha no válida":"Invalid date",uniqueViolation:"es"===language?"Este valor ya existe":"This value already exists"},errors:{generic:"es"===language?"Ha ocurrido un error":"An error occurred",network:"es"===language?"Error de conexión":"Network error",unauthorized:"es"===language?"No autorizado":"Unauthorized",forbidden:"es"===language?"Acceso denegado":"Access forbidden",notFound:"es"===language?"No encontrado":"Not found",validation:"es"===language?"Error de validación":"Validation error",server:"es"===language?"Error del servidor":"Server error",timeout:"es"===language?"Tiempo agotado":"Request timeout",chunkLoadError:"es"===language?"Error de carga. Recarga la página.":"Load error. Please refresh.",sessionExpired:"es"===language?"Sesión expirada":"Session expired"},success:{saved:"es"===language?"Guardado correctamente":"Saved successfully",updated:"es"===language?"Actualizado correctamente":"Updated successfully",deleted:"es"===language?"Eliminado correctamente":"Deleted successfully",created:"es"===language?"Creado correctamente":"Created successfully",sent:"es"===language?"Enviado correctamente":"Sent successfully",uploaded:"es"===language?"Subido correctamente":"Uploaded successfully",imported:"es"===language?"Importado correctamente":"Imported successfully",exported:"es"===language?"Exportado correctamente":"Exported successfully"},loading:{generic:"es"===language?"Cargando...":"Loading...",saving:"es"===language?"Guardando...":"Saving...",loading:"es"===language?"Cargando...":"Loading...",processing:"es"===language?"Procesando...":"Processing...",uploading:"es"===language?"Subiendo...":"Uploading...",deleting:"es"===language?"Eliminando...":"Deleting...",signing_in:"es"===language?"Iniciando sesión...":"Signing in...",signing_out:"es"===language?"Cerrando sesión...":"Signing out..."},date:{today:"es"===language?"Hoy":"Today",yesterday:"es"===language?"Ayer":"Yesterday",tomorrow:"es"===language?"Mañana":"Tomorrow",thisWeek:"es"===language?"Esta semana":"This week",nextWeek:"es"===language?"Próxima semana":"Next week",thisMonth:"es"===language?"Este mes":"This month",nextMonth:"es"===language?"Próximo mes":"Next month",days:"es"===language?["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"]:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:"es"===language?["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:"es"===language?["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:"es"===language?["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},format:{currency:"es"===language?"{{value}} €":"${{value}}",percentage:"{{value}}%",decimal:"{{value}}",integer:"{{value}}"},theme:{light:"es"===language?"Claro":"Light",dark:"es"===language?"Oscuro":"Dark",system:"es"===language?"Sistema":"System",switchTo:"es"===language?"Cambiar a tema {{theme}}":"Switch to {{theme}} theme",options:"es"===language?"Opciones de tema":"Theme options"},dashboard:{title:"Dashboard",welcome:"es"===language?"Bienvenido":"Welcome",overview:"es"===language?"Resumen":"Overview",statistics:"es"===language?"Estadísticas":"Statistics",recentActivity:"es"===language?"Actividad reciente":"Recent Activity",quickActions:"es"===language?"Acciones rápidas":"Quick Actions"},auth:{login:"es"===language?"Iniciar sesión":"Sign In",logout:"es"===language?"Cerrar sesión":"Sign Out",register:"es"===language?"Registrarse":"Sign Up",forgotPassword:"es"===language?"¿Olvidaste tu contraseña?":"Forgot Password?",resetPassword:"es"===language?"Restablecer contraseña":"Reset Password",profile:"es"===language?"Perfil":"Profile",signInTitle:"es"===language?"Iniciar sesión":"Sign In",signInSubtitle:"es"===language?"Ingresa a tu cuenta":"Sign in to your account",rememberMe:"es"===language?"Recordarme":"Remember me",noAccount:"es"===language?"¿No tienes cuenta?":"Don't have an account?",alreadyHaveAccount:"es"===language?"¿Ya tienes cuenta?":"Already have an account?",signInButton:"es"===language?"Iniciar sesión":"Sign In",signOutConfirm:"es"===language?"¿Estás seguro de cerrar sesión?":"Are you sure you want to sign out?"},featureFlags:{title:"Feature Flags",resetDefaults:"es"===language?"Restablecer por defecto":"Reset to Defaults",reloadConfig:"es"===language?"Recargar configuración":"Reload Configuration",categories:{core:{title:"es"===language?"Funciones Principales":"Core Features",description:"es"===language?"Funcionalidades básicas de la aplicación":"Basic application functionality"},dashboard:{title:"Dashboard",description:"es"===language?"Funciones del panel de control":"Dashboard and analytics features"},admin:{title:"es"===language?"Administración":"Administration",description:"es"===language?"Herramientas de administración del sistema":"System administration tools"},experimental:{title:"Experimental",description:"es"===language?"Funciones en desarrollo y depuración":"Development and debugging features"}},features:{darkTheme:{name:"es"===language?"Tema Oscuro":"Dark Theme",description:"es"===language?"Permite cambiar entre temas claro y oscuro":"Enable light/dark theme switching"},multiLanguage:{name:"es"===language?"Multi-idioma":"Multi-Language",description:"es"===language?"Soporte para múltiples idiomas":"Support for multiple languages"},notifications:{name:"es"===language?"Notificaciones":"Notifications",description:"es"===language?"Sistema de notificaciones push":"Push notification system"},analytics:{name:"es"===language?"Analíticas":"Analytics",description:"es"===language?"Seguimiento de uso y métricas":"Usage tracking and metrics"},dashboardWidgets:{name:"es"===language?"Widgets Dashboard":"Dashboard Widgets",description:"es"===language?"Widgets interactivos en el dashboard":"Interactive dashboard widgets"},realtimeUpdates:{name:"es"===language?"Actualizaciones en Tiempo Real":"Realtime Updates",description:"es"===language?"Actualizaciones automáticas de datos":"Automatic data updates"},exportData:{name:"es"===language?"Exportar Datos":"Export Data",description:"es"===language?"Capacidad de exportar datos":"Data export capabilities"},importData:{name:"es"===language?"Importar Datos":"Import Data",description:"es"===language?"Capacidad de importar datos":"Data import capabilities"},userManagement:{name:"es"===language?"Gestión de Usuarios":"User Management",description:"es"===language?"Administración de usuarios y permisos":"User and permission management"},systemSettings:{name:"es"===language?"Configuración del Sistema":"System Settings",description:"es"===language?"Configuración avanzada del sistema":"Advanced system configuration"},auditLogs:{name:"es"===language?"Logs de Auditoría":"Audit Logs",description:"es"===language?"Registro de actividades del sistema":"System activity logging"},backupRestore:{name:"es"===language?"Backup y Restauración":"Backup & Restore",description:"es"===language?"Funciones de respaldo y restauración":"Backup and restore functions"},experimentalUI:{name:"es"===language?"UI Experimental":"Experimental UI",description:"es"===language?"Interfaz de usuario experimental":"Experimental user interface"},betaFeatures:{name:"es"===language?"Funciones Beta":"Beta Features",description:"es"===language?"Funciones en fase beta":"Features in beta phase"},debugMode:{name:"es"===language?"Modo Debug":"Debug Mode",description:"es"===language?"Herramientas de depuración":"Development debugging tools"},performanceMonitoring:{name:"es"===language?"Monitoreo de Rendimiento":"Performance Monitoring",description:"es"===language?"Seguimiento del rendimiento de la app":"Application performance tracking"}}}}}get(key,params,context){const cacheKey=this.getCacheKey(key,params,context);if(this.translationCache.has(cacheKey))return this.translationCache.get(cacheKey);const translation=this.getTranslation(key,params,context);return this.translationCache.set(cacheKey,translation),translation}instant(key,params,context){return this.getTranslation(key,params,context)}getTranslation(key,params,context){const currentTranslations=this.currentTranslations();if(!currentTranslations)return this.logger.logWarning("No translations loaded",{key}),key;const translation=this.getNestedProperty(currentTranslations,key);if(void 0===translation){const fallbackTranslations=this._translations().en;if(fallbackTranslations&&"en"!==this._currentLanguage()){const fallbackTranslation=this.getNestedProperty(fallbackTranslations,key);if(void 0!==fallbackTranslation)return this.logger.logWarning("Using fallback translation",{key,language:"en"}),this.interpolate(fallbackTranslation,params,context)}return this.logger.logWarning("Translation key not found",{key,language:this._currentLanguage()}),key}return this.interpolate(translation,params,context)}getNestedProperty(obj,path){return path.split(".").reduce((current,key)=>current&&"object"==typeof current&&key in current?current[key]:void 0,obj)}interpolate(translation,params,context){if(!params&&!context)return translation;let result=translation;return params&&Object.entries(params).forEach(([key,value])=>{const placeholder=new RegExp(`{{\\s*${key}\\s*}}`,"g");result=result.replace(placeholder,String(value))}),void 0!==context?.count&&(result=this.handlePluralization(result,context.count)),result}handlePluralization(translation,count){const pluralMatch=translation.match(/\{(\w+),\s*plural,\s*(.+?)\}/);if(pluralMatch){const[,,forms]=pluralMatch;forms.split(/\s+(\w+)\s*\{([^}]+)\}/);if(1===count){const oneMatch=forms.match(/one\s*\{([^}]+)\}/);if(oneMatch)return oneMatch[1]}else{const otherMatch=forms.match(/other\s*\{([^}]+)\}/);if(otherMatch)return otherMatch[1]}}return translation}getCacheKey(key,params,context){return`${this._currentLanguage()}:${key}:${params?JSON.stringify(params):""}:${context?JSON.stringify(context):""}`}getStoredLanguage(){if("undefined"==typeof localStorage)return null;const stored=localStorage.getItem("boukii_language");return stored&&stored in LANGUAGE_CONFIGS?stored:null}storeLanguage(language){"undefined"!=typeof localStorage&&localStorage.setItem("boukii_language",language)}updateDocumentLanguage(language){"undefined"!=typeof document&&(document.documentElement.lang=language,document.documentElement.dir=getLanguageConfig(language).direction)}reloadTranslations(){var _this5=this;return(0,asyncToGenerator.A)(function*(){_this5.translationCache.clear(),_this5._translations.set({en:null,es:null}),yield _this5.loadTranslations(_this5._currentLanguage()),_this5.logger.logInfo("Translations reloaded",{language:_this5._currentLanguage()})})()}formatDate(date,format="medium"){const locale="es"===this.currentLanguageConfig().code?"es-ES":"en-US",optionsMap={short:{dateStyle:"short"},medium:{dateStyle:"medium"},long:{dateStyle:"long"}},options=optionsMap[format]||optionsMap.medium;return new Intl.DateTimeFormat(locale,options).format(date)}formatNumber(value,type="decimal"){const config=this.currentLanguageConfig(),locale="es"===config.code?"es-ES":"en-US",optionsMap={decimal:{style:"decimal"},currency:{style:"currency",currency:config.currencyCode},percentage:{style:"percent"}},options=optionsMap[type]||optionsMap.decimal;return new Intl.NumberFormat(locale,options).format(value)}static{this.ctorParameters=()=>[]}};TranslationService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],TranslationService)}}]);